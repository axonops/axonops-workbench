/**
 * Module to create a customized dialog
 *
 * Import the `dialog` module from Electron
 */
const Dialog = require('electron').dialog

/**
 * Create a dialog by passing the window's object - which the dialog will be attached to it -, and other data; like the ID of that dialog, and the window's properties
 *
 * @Parameters:
 * {object} `window` the main view/window object
 * {object} `data` properties of the dialog
 */
let createDialog = async (window, data) => {
  try {
    // Show a customized dialog and pass the given data and wait for the response
    let selectedItem = await Dialog.showOpenDialogSync(data)

    // Send the response to the renderer thread
    window.webContents.send(`dialog:${data.id}`, selectedItem)
  } catch (e) {
    try {
      // If the error is a number then don't log the error
      if (!isNaN(parseInt(e.toString())))
        throw 0

      addLog(`Error in process dialog. Details: ${e}`, 'error')
    } catch (e) {}
  }
}

module.exports = {
  createDialog
}
